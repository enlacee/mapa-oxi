<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="public/plugin/bootstrap-3.3.5-dist/css/bootstrap.css" media="screen" charset="utf-8">
        <link rel="stylesheet" href="public/css/style.css" media="screen" charset="utf-8">
        <title>Proyectos 2009 - 2015</title>
        <style type="text/css">
        #shadow {
            position: fixed;
            width: 100%;
            height: 100%;
            background-color: transparent;
            top: 0;
        }
        #modalPadre{
            position: fixed;
            background-color: white;
            border:1px solid black;
            border-radius: 26px;
            top: 25%;
            width: 34%;
            height: 66%;
            left: 6.5%;
        }
        #modalPadre h2 {
            font-family: 'BreePeru-Light';
            font-weight: bold;
            color:white;
            margin: 15px 0 0 25px;
        }
        #modalPadre .franja-lila {
            background-color: #90278E;
            display: inline-block;
            margin: 25px 0 0 0;
            padding-right: 20px;
        }
        #modalHijo {
            position: fixed;
            background-color: white;
            border:1px solid black;
            border-radius: 26px;
            top: 30%;
            width: 28%;
            height: 66%;
            left: 6.5%;
        }
        #modalHijo h2 {
            font-family: 'BreePeru-Light';
            font-weight: bold;
            color:purple;
            margin: 15px 0 0 25px;
        }
        .btn-close {
            background-image: url('public/image/btn-close.png');
            width: 70px;
            height: 70px;
            right: -18px;
            position: absolute;
            top: -18px;
            cursor: pointer;
        }
        </style>
    </head>
    <body>
        <div class="wrapper">
            <div class="header container">
                <div class="row">
                    <div class="col-md-7">
                        <div class="row">
                            <div class="">
                                <h2 class="main-title-1">Mapa de proyectos</h2>
                            </div>
                            <div class="text-center">
                                <h1 class="main-title-2">Obras por Impuestos</h1>
                            </div>
                            <div class="title-h1 text-right">
                                Proyectos adjudicados, en ejecución y concluidos 2009 - 2015
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 text-right" style="margin-top:30px">
                        <img src="public/image/ico_proinversion.png" />
                    </div>
                </div>
            </div>
            <div class="body container">
                <div class="row">
                    <div class="col-md-4 content-instruction">
                        <div class="title-instruction">INSTRUCCIONES DE NAVEGACIÓN</div>
                        <ul>
                            <li>Click sobre el departamento a consultar.</li>
                            <li>Seleccionar el sector del proyecto a consultar y hacer click.</li>
                            <li>Buscar el proyecto en la lista y hacer click para ver detalle.</li>
                        </ul>
                    </div>
                    <div class="col-md-8  pull-right">
                        <div style="width: 100%">
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1000 1000"
        style="">


    <!-- SVG content -->
    <image xlink:href="public/image/peru-mapa.png" x="200" y="0" height="80%" width="80%"/>

    <!--lima-->
    
  <path
    onmouseover="seleccionarDepa(this, true)"
    onmouseout="seleccionarDepa(this, false)"
    onclick="clickDepa(this)"
     metadatajson="{
        name:'ANCASH',
        x:430,
        y:370,
        sectores: {
            1: {
                name: 'Transporte',
                content: '<ol><li><a onclick=\'abrirVentanaHijo(event)\' href=\'#\'>title 01<\/a><\/li><li>title 02<\/li><\/ol>',
                image: 'public/image/sectores/ico_transporte_on.png',
                imageSelect: 'public/image/sectores/ico_transporte_xx.png'
            },
            2: {
                name: 'Comercio y Turismo',
                image: 'public/image/sectores/ico_comercio_on.png',
                imageSelect: 'public/image/sectores/ico_comercio_xx.png'
            },
            6: {
                name: 'Educación',
                image: 'public/image/sectores/ico_educacion_on.png',
                imageSelect: 'public/image/sectores/ico_educacion_xx.png'
            },
            7: {
                name: 'Salud',
                image: 'public/image/sectores/ico_salud_on.png',
                imageSelect: 'public/image/sectores/ico_salud_xx.png'
            },
            9: {
                name: 'Cultura y Esparcimiento',
                image: 'public/image/sectores/ico_cultura_on.png',
                imageSelect: 'public/image/sectores/ico_cultura_xx.png'
            }
        }
    }"

     style="fill:yellow;fill-opacity:0;stroke:#ffffff;stroke-width:1.65666521px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
     d="m 444.71091,372.60241 c 1.69156,0.42287 2.46989,5.9973 3.29697,7.21031 0.78401,1.14983 3.14728,1.14942 3.56514,3.87955 0.78089,5.10193 2.70643,6.68914 3.64275,12.09437 0.49581,2.86218 1.34055,10.26707 2.88068,11.03713 9.01846,8.37497 9.66582,13.31972 12.73533,14.91174 0.58931,0.30564 1.29851,-4.31147 2.35086,-4.31486 1.00543,-0.003 1.72528,0.64513 2.66588,0.54793 0.95661,-0.0989 -1.55275,1.96196 -0.58412,3.08851 1.44972,1.68608 4.79625,3.87604 7.8747,5.54486 0.85548,0.12445 7.16438,-0.88003 7.96354,-1.51458 3.42516,-2.71968 -0.69336,-5.62191 2.17281,-7.9128 2.44252,-1.95227 9.46971,-4.27166 9.01522,-7.84925 -0.11106,-0.87415 -2.15569,-2.85301 -4.09151,-7.89886 -0.91896,-2.39532 0.82944,-4.89021 -0.45977,-7.84132 -0.89834,-2.05636 5.16561,-8.55888 4.0502,-10.77346 -0.74534,-1.47987 5.25791,0.38401 4.36475,-1.09752 -0.51985,-0.86232 -0.082,-2.47281 -0.67005,-3.33957 -1.34362,-1.98049 -4.49931,-4.34778 -6.20382,-6.31304 -2.91611,-3.36221 -4.07279,-6.6373 -7.75294,-9.60355 -2.72499,-2.19638 -3.9117,-7.83617 -6.98099,-9.66151 -0.83538,-0.49682 -0.81769,-0.71946 -1.68264,-1.16416 -1.58641,-0.81562 0.36855,-2.59294 -0.69672,-4.05064 -1.48372,-2.03034 -2.90679,-4.32295 -5.34527,-5.24486 -1.75653,-0.66408 -2.98663,1.18449 -5.11398,1.03397 -2.42279,-0.1714 -6.87479,0.15658 -8.58383,2.34601 -2.44792,3.13602 -5.98189,5.82916 -7.3939,7.84369 -1.77441,2.53157 -2.17563,6.76854 -3.18766,8.36018 -1.72219,2.70856 -4.31736,1.42457 -7.85571,3.70022 -0.63276,6.3658 -3.08462,4.2539 0.0241,6.98151 z"
     id="path2983"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="cssscsssscsssssssssssssssssscc" />



    <text id="nombre_depa" x="350" y="500" fill="white" style="font-weight:bold; font-size: 13px;text-shadow: 1px 1px;" >
        NAME
    </text>

    <!-- cirlces-->text-shadow: 1px 1px;
    <!-- TRANSPORTE-->
    <image
    id="sector_1"
    xlink:href="public/image/sectores/ico_transporte.png" x="250" y="0" height="100px" width="100px"/>

    <!-- COMERCIO-->
    <image
    id="sector_2"
    xlink:href="public/image/sectores/ico_comercio.png" x="180" y="75" height="100px" width="100px"/>

    <!-- IRRIGACION-->
    <image
    id="sector_3"
    xlink:href="public/image/sectores/ico_irrigacion.png" x="120" y="160" height="100px" width="100px"/>

    <!-- ENERGIA-->
    <image
    id="sector_4"
    xlink:href="public/image/sectores/ico_energia.png" x="90" y="260" height="100px" width="100px"/>

    <!-- SEGURIDAD-->
    <image
    id="sector_5"
    xlink:href="public/image/sectores/ico_seguridad.png" x="80" y="360" height="100px" width="100px"/>

    <!-- EDUCACION-->
    <image
    id="sector_6"
    xlink:href="public/image/sectores/ico_educacion.png" x="90" y="460" height="100px" width="100px"/>

    <!-- SANEAMIENTO SALUD-->
    <image
    id="sector_7"
    xlink:href="public/image/sectores/ico_salud.png" x="120" y="560" height="100px" width="100px"/>

    <!-- TELECOMUNICACIONES-->
    <image
    id="sector_8"
    xlink:href="public/image/sectores/ico_telecomunicaciones.png" x="175" y="644" height="100px" width="100px"/>

    <!-- CULTURA-->
    <image
    id="sector_9"
    xlink:href="public/image/sectores/ico_cultura.png" x="250" y="715" height="100px" width="100px"/>

    <!-- OTROS-->
    <image
    id="sector_10"
    xlink:href="public/image/sectores/ico_otros.png" x="330" y="780" height="100px" width="100px"/>


</svg>

                        </div>
                    </div>
                </div>

                <div class="row" style="max-width:800px">
                    <div style="width: 100%">
                        
                    </div>
                </div>
            </div>
            <div class="footer container">
                <div class="button-download col-md-3 pull-right nopadding">
                    <div class="text-center imageDownload">
                        <img src="public/image/ico_descargue.png" alt="" />
                    </div>
                    <div class="row">
                        <div class="text-bold text-center">
                            Descargue aquí
                        </div>
                    </div>
                    <div class="row">
                        <div class="text-bold text-center">
                            Todos los proyectos en Excel
                        </div>
                    </div>

                </div>
            </div>
        </div>

<!--modals-->
<div class="#shadow"> shadow</div>
<div id="modalPadre" style="display:none">
    <div class="btn-close"></div>
    <div>
        <span class="franja-lila">
            <h2 class="title">Transporte</h2>
        </span>

        <div class="content">
            <ol>
                <li>Mejoramiento Jr. Progreso Coischo – Santa</li>
                <li>Mejoramiento calles Huarmey</li>
                <li>Acceso vial Nuevo Chimbote – Santa</li>
                <li>Construcción y mejoramiento calles Huarmey</li>
                <li>Mejoramiento camino vecinal Huarmey -Ancash</li>
                <li>Mejoramiento vías Caserío de Chora, Lacabamba</li>
                <li>Mejoramiento pistas y veredas barrios de Huaraz</li>
                <li>Mejoramiento infraestructura vial y peatonal distritos de Huaraz</li>
                <li>Mejoramiento infraestructura vial barrio La Pradera, Huaraz</li>
                <li>Mejoramiento Jr. Ladislao Meza, Huaraz</li>
                <li>Mejoramiento infraestructura vial y peatonal Llamac, Pacllon</li>
                <li>Mejoramiento infraestructura vial y peatonal Pacllon</li>
                <li>Mejoramiento carretera vecinal Culebras, Huarmey</li>
                <li>Mejoramiento pistas y veredas San Cristóbal de Chupan, Huachis</li>
                <li>Pistas y veredas Chasquitambo - Colquioc</li>
                <li>Pistas y veredas Llamarumi - Colquioc</li>
                <li>Pistas y veredas Llampa - Colquioc</li>
                <li>Mejoramiento transitabilidad Ciudad del Pescador – Huarmey</li>
            </ol>
        </div>
    </div>
</div>

<div id="modalHijo" style="display:none;    padding: 0 0 0 10px;">
    <div class="btn-close"></div>
    <div>
        <span class="franja-lila">
            <h2 class="title">Mejoramiento infraestructura vial y peatonal distritos de Huaraz</h2>
        </span>

        <div class="content">
            <p><b>descripcion</b></p>
            <p>Mejoramiento de la Infraestructura vial y peatonal
en los barrios emprendedores de Vista Alegre, Piedras
Azules, 08 de diciembre del distrito de Huaraz,
provincia de Huaraz, departamento de Ancash.</p>
        </div>
    </div>
</div>

        <script type='text/javascript' src='public/plugin/jquery-1.11.3.min.js'></script>
        <script charset="utf-8">
/*            function depaIn(el) {
                el.style.fill = '#0079C0';
            }
            function depaOut(el) {
                el.style.fill = 'none';
            }

*/
            var sector = {};
            var curItem = {};
            var pathB = 'public/image/sectores/';
                sector = [
                    {id: 1, name: 'Transporte', image: pathB+'ico_transporte.png'},
                    {id: 2, name: 'Comercio', image: pathB+'ico_comercio.png'},
                    {id: 3, name: 'Irrigación', image: pathB+'ico_irrigacion.png'},
                    {id: 4, name: 'Energía', image: pathB+'ico_energia.png'},
                    {id: 5, name: 'Seguridad', image: pathB+'ico_seguridad.png'},
                    {id: 6, name: 'Eduación', image: pathB+'ico_educacion.png'},
                    {id: 7, name: 'Saniamiento y Salud', image: pathB+'ico_salud.png'},
                    {id: 8, name: 'Telecomunicaciones', image: pathB+'ico_telecomunicaciones.png'},
                    {id: 9, name: 'Cultura y Esparcimiento', image: pathB+'ico_cultura.png'},
                    {id: 10, name: 'Otros', image: pathB+'ico_otros.png'}
                ];


            function seleccionarDepa(el, statusOver) {
                var json = readMetaData(el);
                setText(json, statusOver);
                selectSector(json.sectores, statusOver)
            }
            function readMetaData(el) {
                var stringMeta =  el.getAttribute('metadatajson')
                var str_json = JSON.stringify(eval("(" + stringMeta + ")"));
                return JSON.parse(str_json);
            }

            function setText(data, flag) {
                var text = document.getElementById('nombre_depa');
                text.setAttribute('x', data.x);
                text.setAttribute('y', data.y);
                text.innerHTML = data.name;              
            }

            function selectSector(dataArray, flagOVER) {
                sector.forEach(function(item, i) {
                    var img = document.getElementById('sector_'+item.id);
                    var idlocal = item.id;

                    if (flagOVER == true) {
                        if (typeof(dataArray[item.id]) != 'undefined') {
                            img.setAttribute('xlink:href', dataArray[idlocal].image);
                        } else {
                            img.setAttribute('xlink:href', item.image);
                        }   
                    } else {
                        //FUERA
                        if (typeof(curItem.name) != 'undefined') { //click
                            img.setAttribute('xlink:href', item.image);
                            if (typeof(curItem.sectores[idlocal]) != 'undefined') {
                                img.setAttribute('xlink:href', curItem.sectores[idlocal].image);
                                img.setAttribute('onclick', 'abrirVentanaBase(this)');
                            }
                        } else {
                            img.setAttribute('xlink:href', '');
                        }
                    }
                });
            }
            // click
            function clickDepa(el) {
                el.style.fill = '#0079C0';
                el.style.fillOpacity = 1;
                var json = readMetaData(el);
                curItem = json;
            }

            //========================================
            // buble
            function abrirVentanaBase(el) {
                var $modal = $('#modalPadre');
                $modal.css('display', 'block');
                var strid = el.getAttribute('id');
                var key = strid.split('_')[1];

                $modal.find('.title').html(curItem.sectores[key].name);
                $modal.find('.content').html(curItem.sectores[key].content);
                el.setAttribute('xlink:href',curItem.sectores[key].imageSelect);
            }

            function abrirVentanaHijo(e) {
                e.preventDefault();
                var $modal = $('#modalHijo');
                $modal.css('display', 'block');
            }

            //LOAD
            $(function() {
                // Handler for .ready() called.
                $('.btn-close').click(function(){
                    $(this).parent().css('display', 'none')
                })
            });

        </script>
    </body>
</html>
